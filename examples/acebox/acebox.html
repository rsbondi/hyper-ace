<!-- plunk: http://plnkr.co/edit/1BAWgE0wtKZmWlFKRcQg?p=preview -->
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css"/>
    <meta charset="utf-8">
</head>

<body>

<div id="editor"></div>
<div id="hyper">
    <label for="acemode">Edit Mode:</label>
    <select name="acemode" id="acemode">
        <option value="javascript">javascript</option>
        <option value="xml">html/xml</option>
        <option value="css">css</option>
    </select>
    <h3>Hypersearch with [tab] key in search box</h3>
    <div id="results"></div>
</div>

<script src="http://ace.c9.io/build/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="../../hyper-ace.js"></script>
<script>
    // create ace editor
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/eclipse");
    editor.getSession().setMode("ace/mode/javascript");
    var hyper;

    // undocumented ace function, used so we can initialize on callback of searchbox load to pass to hyper-ace
    ace.config.loadModule("ace/ext/searchbox", function(e) {
        e.Search(editor); // set to editor component
        var box = document.getElementById('editor').getElementsByClassName('ace_search_field')[0]; // get texbox element
        box.id = 'hyperbox'; // hyperace needs id, so we set it for the search box
        box.addEventListener('keyup', function (e) { // look for tab key in search box
            if (e.keyCode == 9)
                hyper.search();
        });

        hyper = hyperace.create(editor, 'results', 'hyperbox'); // add hyper-ace editor, target and search box id created above

    });

    document.getElementById("acemode").addEventListener('change', function () {
        editor.getSession().setMode({"path": "ace/mode/"+this.value});
    });


</script>
</body>

</html>
